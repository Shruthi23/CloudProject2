<div class="row mt-5">
  <div  class="col-md-6 m-auto">
    <div class="card card-body">
      <h1 class="text-center mb-3"><i class="fas fa-user"></i>  Login</h1>
  
      <form >
        <div class="form-group">
         
          <input
            type="email"
            id="email"
            name="email"
            class="form-control"
            placeholder="Enter Email"
           
          />
        </div>
        <div class="form-group">
          
          <input
            type="password"
            id="password"
            name="password"
            class="form-control"
            placeholder="Enter Password"
           
          />
        </div>
        <select style="border-top: transparent;border-left: transparent;border-right: transparent;" class="form-control" id="exampleFormControlSelect1">
          <option>Doctor</option>
          <option>Patient</option>
          
        </select>
        
        <p><button
          onclick="callApi()"
          type="button"
          style=" background-color: #8064A2;margin-top: 10%;" class="btn btn-primary btn-block">Submit</button></p>
      </form>
      <p class="text-center mb-3">
        No Account? <a href="/register">Register</a> 
      </p>
    </div>
  </div>
</div>

<script>
  function callApi(){
    console.log("caall")
  
  const email=document.getElementById("email").value
  
  const password=document.getElementById("password").value
 
  
  const data={
    
   
    email:email,
   
    password:password,
   
    }
  const options={
    method:"POST",
    headers: {
    
    'Content-Type': 'application/json'
  },
    body:JSON.stringify(data)
  }
  fetch("/login",options).then(res=>{
    res.json().then(json=>{
      console.log("json",json)
      if(json.message=="Success"){

      
      localStorage.setItem("token",json.token)
      localStorage.setItem("data",JSON.stringify(json.data))
      window.location.href="http://localhost:3000/dashboard"
      }
      else{
        alert("You have entered an invalid password")
      }
    }).catch(err=>{
      console.log("err",err)
    })
    

    //window.location.href=`http://localhost:3000/`
    
    
   
    }).catch(error=>{
      console.log("error",error)
    })
   
 

  
  
    
  
  }
</script>